//PRODUCTS
 var productList = [{
  name: "iPhone",
  img:
    "http://store.storeimages.cdn-apple.com/4973/as-images.apple.com/is/image/AppleInc/aos/published/images/i/ph/iphone6s/plus/iphone6s-plus-box-gray-2015_GEO_US?wid=478&hei=595&fmt=jpeg&qlt=95&op_sharpen=0&resMode=bicub&op_usm=0.5,0.5,0,0&iccEmbed=0&layer=comp&.v=1453526293487",
  price: 799.99,
  rating: 4.6,
  category: "tech",
  tags: ["phone", "apple", "smartphone", "technology", "tech"],
  description:
    "Unopanit rutiepa rer yotux iputi to itereti. Arienek taced ecetirap bopep? Iponeyuy urere repoyoc? Padupip cierire nelerac soto arev kame dologol ga. Ri dale pina ebocelier tut vor cixur eyur cicima pobayol? Ga ni yac execorug ran ieterocol one erapo. Piwinen towar rofon. Gosasa viena adarab hic ayiye lufonem ritilin anonele se. Yewi benosa ocu riehe ecumiw atocitof ge ara amaseya liek. Nec etenano etuyi iebie sidatu esawe ze. Mim sat re ocodedo yinunor sie nigip se, ger ekeleli edekin ne ikor furaxir la hohoru atene rar. Imuhec lupi one lidec temerop rotin pi; gecapab iricotis dola. Narodi luli apuru betomir yoseriey sar ired, hisolet tir eloci; nade sanira iforenab apotie rac tul akele! Topuri tagiter tege pe tot tona etu ce suqif, nara nihigig fene.",
  quantity: 0,
  itemID: 0,
  itemReviews: [
    {name: "John", rating: 3.8, review: "Sleek design, intuitive interface, I assume it calls fine, but I don't have any friends, so I don't know about that. Works great as a coaster."},
    {name: "Susan", rating: 1, review: "I chose the iPhone because I was told it would keep my data safe, but for some reason it seems like anyone can just pick up my phone and look at all my stuff. I contacted support and they said I need some... passworm-thingy. Not helpful AT ALL. Last time I buy from a no-name company."},
    {name: "Brandon", rating: 5, review: "I just ordered this new iPhone and I haven't turned it on yet but I saw the beautiful Apple logo on the back and I just HAD to come give them 5 stars right away. Apple is the best, and I love them blindly."}]
}
,{
  name: "Android",
  img: "android.png",
  price: 699.99,
  rating: 4.5,
  category: "tech",
  tags: ["phone", "samsung", "smartphone", "technology", "tech"],
  description:
    "Unopanit rutiepa rer yotux iputi to itereti. Arienek taced ecetirap bopep? Iponeyuy urere repoyoc? Padupip cierire nelerac soto arev kame dologol ga. Ri dale pina ebocelier tut vor cixur eyur cicima pobayol? Ga ni yac execorug ran ieterocol one erapo. Piwinen towar rofon. Gosasa viena adarab hic ayiye lufonem ritilin anonele se. Yewi benosa ocu riehe ecumiw atocitof ge ara amaseya liek. Nec etenano etuyi iebie sidatu esawe ze. Mim sat re ocodedo yinunor sie nigip se, ger ekeleli edekin ne ikor furaxir la hohoru atene rar. Imuhec lupi one lidec temerop rotin pi; gecapab iricotis dola. Narodi luli apuru betomir yoseriey sar ired, hisolet tir eloci; nade sanira iforenab apotie rac tul akele! Topuri tagiter tege pe tot tona etu ce suqif, nara nihigig fene.",
  quantity: 0,
  itemID: 1,
  itemReviews: [
    {name: "John", rating: 3.8, review: "Sleek design, intuitive interface, I assume it calls fine, but I don't have any friends, so I don't know about that. Works great as a coaster."},
    {name: "Susan", rating: 1, review: "I chose the iPhone because I was told it would keep my data safe, but for some reason it seems like anyone can just pick up my phone and look at all my stuff. I contacted support and they said I need some... passworm-thingy. Not helpful AT ALL. Last time I buy from a no-name company."},
    {name: "Brandon", rating: 5, review: "I just ordered this new iPhone and I haven't turned it on yet but I saw the beautiful Apple logo on the back and I just HAD to come give them 5 stars right away. Apple is the best, and I love them blindly."}]
}
,{
  name: "Lenovo",
  img: "http://hothardware.com/newsimages/Item25850/Lenovo_Laptop.jpg",
  price: 599.99,
  rating: 4.2,
  category: "tech",
  tags: ["laptop", "computer", "pc", "windows", "microsoft", "lenovo"],
  description:
    "Unopanit rutiepa rer yotux iputi to itereti. Arienek taced ecetirap bopep? Iponeyuy urere repoyoc? Padupip cierire nelerac soto arev kame dologol ga. Ri dale pina ebocelier tut vor cixur eyur cicima pobayol? Ga ni yac execorug ran ieterocol one erapo. Piwinen towar rofon. Gosasa viena adarab hic ayiye lufonem ritilin anonele se. Yewi benosa ocu riehe ecumiw atocitof ge ara amaseya liek. Nec etenano etuyi iebie sidatu esawe ze. Mim sat re ocodedo yinunor sie nigip se, ger ekeleli edekin ne ikor furaxir la hohoru atene rar. Imuhec lupi one lidec temerop rotin pi; gecapab iricotis dola. Narodi luli apuru betomir yoseriey sar ired, hisolet tir eloci; nade sanira iforenab apotie rac tul akele! Topuri tagiter tege pe tot tona etu ce suqif, nara nihigig fene.",
  quantity: 0,
  itemID: 2,
  itemReviews: [
    {name: "John", rating: 3.8, review: "Sleek design, intuitive interface, I assume it calls fine, but I don't have any friends, so I don't know about that. Works great as a coaster."},
    {name: "Susan", rating: 1, review: "I chose the iPhone because I was told it would keep my data safe, but for some reason it seems like anyone can just pick up my phone and look at all my stuff. I contacted support and they said I need some... passworm-thingy. Not helpful AT ALL. Last time I buy from a no-name company."},
    {name: "Brandon", rating: 5, review: "I just ordered this new iPhone and I haven't turned it on yet but I saw the beautiful Apple logo on the back and I just HAD to come give them 5 stars right away. Apple is the best, and I love them blindly."}]
}
,{
  name: "Macbook",
  img:
    "http://store.storeimages.cdn-apple.com/4973/as-images.apple.com/is/image/AppleInc/aos/published/images/M/AC/MACBOOKPRO/MACBOOKPRO?wid=1200&hei=630&fmt=jpeg&qlt=95&op_sharpen=0&resMode=bicub&op_usm=0.5,0.5,0,0&iccEmbed=0&layer=comp&.v=1453540968678",
  price: 1599.99,
  rating: 4.3,
  category: "tech",
  tags: ["laptop", "computer", "apple", "osx", "mac"],
  description:
    "Unopanit rutiepa rer yotux iputi to itereti. Arienek taced ecetirap bopep? Iponeyuy urere repoyoc? Padupip cierire nelerac soto arev kame dologol ga. Ri dale pina ebocelier tut vor cixur eyur cicima pobayol? Ga ni yac execorug ran ieterocol one erapo. Piwinen towar rofon. Gosasa viena adarab hic ayiye lufonem ritilin anonele se. Yewi benosa ocu riehe ecumiw atocitof ge ara amaseya liek. Nec etenano etuyi iebie sidatu esawe ze. Mim sat re ocodedo yinunor sie nigip se, ger ekeleli edekin ne ikor furaxir la hohoru atene rar. Imuhec lupi one lidec temerop rotin pi; gecapab iricotis dola. Narodi luli apuru betomir yoseriey sar ired, hisolet tir eloci; nade sanira iforenab apotie rac tul akele! Topuri tagiter tege pe tot tona etu ce suqif, nara nihigig fene.",
  quantity: 0,
  itemID: 3,
  itemReviews: [
    {name: "John", rating: 3.8, review: "Sleek design, intuitive interface, I assume it calls fine, but I don't have any friends, so I don't know about that. Works great as a coaster."},
    {name: "Susan", rating: 1, review: "I chose the iPhone because I was told it would keep my data safe, but for some reason it seems like anyone can just pick up my phone and look at all my stuff. I contacted support and they said I need some... passworm-thingy. Not helpful AT ALL. Last time I buy from a no-name company."},
    {name: "Brandon", rating: 5, review: "I just ordered this new iPhone and I haven't turned it on yet but I saw the beautiful Apple logo on the back and I just HAD to come give them 5 stars right away. Apple is the best, and I love them blindly."}]
}
,{
  name: "Surface",
  img:
    "http://www.bhphotovideo.com/images/images1000x1000/microsoft_pu2_00017_12_512gb_surface_pro_1175090.jpg",
  price: 899.99,
  rating: 3.9,
  category: "tech",
  tags: ["tablet", "computer", "microsoft", "windows"],
  description:
    "Unopanit rutiepa rer yotux iputi to itereti. Arienek taced ecetirap bopep? Iponeyuy urere repoyoc? Padupip cierire nelerac soto arev kame dologol ga. Ri dale pina ebocelier tut vor cixur eyur cicima pobayol? Ga ni yac execorug ran ieterocol one erapo. Piwinen towar rofon. Gosasa viena adarab hic ayiye lufonem ritilin anonele se. Yewi benosa ocu riehe ecumiw atocitof ge ara amaseya liek. Nec etenano etuyi iebie sidatu esawe ze. Mim sat re ocodedo yinunor sie nigip se, ger ekeleli edekin ne ikor furaxir la hohoru atene rar. Imuhec lupi one lidec temerop rotin pi; gecapab iricotis dola. Narodi luli apuru betomir yoseriey sar ired, hisolet tir eloci; nade sanira iforenab apotie rac tul akele! Topuri tagiter tege pe tot tona etu ce suqif, nara nihigig fene.",
  quantity: 0,
  itemID: 4,
  itemReviews: [
    {name: "John", rating: 3.8, review: "Sleek design, intuitive interface, I assume it calls fine, but I don't have any friends, so I don't know about that. Works great as a coaster."},
    {name: "Susan", rating: 1, review: "I chose the iPhone because I was told it would keep my data safe, but for some reason it seems like anyone can just pick up my phone and look at all my stuff. I contacted support and they said I need some... passworm-thingy. Not helpful AT ALL. Last time I buy from a no-name company."},
    {name: "Brandon", rating: 5, review: "I just ordered this new iPhone and I haven't turned it on yet but I saw the beautiful Apple logo on the back and I just HAD to come give them 5 stars right away. Apple is the best, and I love them blindly."}]
}
,{
  name: "iPad",
  img:
  "https://www.apple.com/pr/products/images/iPadminiRD_Svr_PSR_PF_PB_HERO.jpg",
  price: 999.99,
  rating: 4.0,
  category: "tech",
  tags: ["tablet", "apple", "computer", "mac"],
  description:
    "Unopanit rutiepa rer yotux iputi to itereti. Arienek taced ecetirap bopep? Iponeyuy urere repoyoc? Padupip cierire nelerac soto arev kame dologol ga. Ri dale pina ebocelier tut vor cixur eyur cicima pobayol? Ga ni yac execorug ran ieterocol one erapo. Piwinen towar rofon. Gosasa viena adarab hic ayiye lufonem ritilin anonele se. Yewi benosa ocu riehe ecumiw atocitof ge ara amaseya liek. Nec etenano etuyi iebie sidatu esawe ze. Mim sat re ocodedo yinunor sie nigip se, ger ekeleli edekin ne ikor furaxir la hohoru atene rar. Imuhec lupi one lidec temerop rotin pi; gecapab iricotis dola. Narodi luli apuru betomir yoseriey sar ired, hisolet tir eloci; nade sanira iforenab apotie rac tul akele! Topuri tagiter tege pe tot tona etu ce suqif, nara nihigig fene.",
  quantity: 0,
  itemID: 5,
  itemReviews: [
    {name: "John", rating: 3.8, review: "Sleek design, intuitive interface, I assume it calls fine, but I don't have any friends, so I don't know about that. Works great as a coaster."},
    {name: "Susan", rating: 1, review: "I chose the iPhone because I was told it would keep my data safe, but for some reason it seems like anyone can just pick up my phone and look at all my stuff. I contacted support and they said I need some... passworm-thingy. Not helpful AT ALL. Last time I buy from a no-name company."},
    {name: "Brandon", rating: 5, review: "I just ordered this new iPhone and I haven't turned it on yet but I saw the beautiful Apple logo on the back and I just HAD to come give them 5 stars right away. Apple is the best, and I love them blindly."}]
}
,{
  name: "Mad Max",
  img: "http://ecx.images-amazon.com/images/I/919Jfwc0i0L._SX385_.jpg",
  price: 14.99,
  rating: 4.9,
  category: "entertainment",
  tags: ["movie", "film", "action", "sci-fi"],
  description:
    "Unopanit rutiepa rer yotux iputi to itereti. Arienek taced ecetirap bopep? Iponeyuy urere repoyoc? Padupip cierire nelerac soto arev kame dologol ga. Ri dale pina ebocelier tut vor cixur eyur cicima pobayol? Ga ni yac execorug ran ieterocol one erapo. Piwinen towar rofon. Gosasa viena adarab hic ayiye lufonem ritilin anonele se. Yewi benosa ocu riehe ecumiw atocitof ge ara amaseya liek. Nec etenano etuyi iebie sidatu esawe ze. Mim sat re ocodedo yinunor sie nigip se, ger ekeleli edekin ne ikor furaxir la hohoru atene rar. Imuhec lupi one lidec temerop rotin pi; gecapab iricotis dola. Narodi luli apuru betomir yoseriey sar ired, hisolet tir eloci; nade sanira iforenab apotie rac tul akele! Topuri tagiter tege pe tot tona etu ce suqif, nara nihigig fene.",
  quantity: 0,
  itemID: 6,
  itemReviews: [
    {name: "John", rating: 3.8, review: "Sleek design, intuitive interface, I assume it calls fine, but I don't have any friends, so I don't know about that. Works great as a coaster."},
    {name: "Susan", rating: 1, review: "I chose the iPhone because I was told it would keep my data safe, but for some reason it seems like anyone can just pick up my phone and look at all my stuff. I contacted support and they said I need some... passworm-thingy. Not helpful AT ALL. Last time I buy from a no-name company."},
    {name: "Brandon", rating: 5, review: "I just ordered this new iPhone and I haven't turned it on yet but I saw the beautiful Apple logo on the back and I just HAD to come give them 5 stars right away. Apple is the best, and I love them blindly."}]
}
,{
  name: "The Revenant",
  img: "http://ecx.images-amazon.com/images/I/91CqQraAqvL._SY500_.jpg",
  price: 19.99,
  rating: 4.5,
  category: "entertainment",
  tags: ["movie", "film", "action"],
  description:
    "Unopanit rutiepa rer yotux iputi to itereti. Arienek taced ecetirap bopep? Iponeyuy urere repoyoc? Padupip cierire nelerac soto arev kame dologol ga. Ri dale pina ebocelier tut vor cixur eyur cicima pobayol? Ga ni yac execorug ran ieterocol one erapo. Piwinen towar rofon. Gosasa viena adarab hic ayiye lufonem ritilin anonele se. Yewi benosa ocu riehe ecumiw atocitof ge ara amaseya liek. Nec etenano etuyi iebie sidatu esawe ze. Mim sat re ocodedo yinunor sie nigip se, ger ekeleli edekin ne ikor furaxir la hohoru atene rar. Imuhec lupi one lidec temerop rotin pi; gecapab iricotis dola. Narodi luli apuru betomir yoseriey sar ired, hisolet tir eloci; nade sanira iforenab apotie rac tul akele! Topuri tagiter tege pe tot tona etu ce suqif, nara nihigig fene.",
  quantity: 0,
  itemID: 7,
  itemReviews: [
    {name: "John", rating: 3.8, review: "Sleek design, intuitive interface, I assume it calls fine, but I don't have any friends, so I don't know about that. Works great as a coaster."},
    {name: "Susan", rating: 1, review: "I chose the iPhone because I was told it would keep my data safe, but for some reason it seems like anyone can just pick up my phone and look at all my stuff. I contacted support and they said I need some... passworm-thingy. Not helpful AT ALL. Last time I buy from a no-name company."},
    {name: "Brandon", rating: 5, review: "I just ordered this new iPhone and I haven't turned it on yet but I saw the beautiful Apple logo on the back and I just HAD to come give them 5 stars right away. Apple is the best, and I love them blindly."}]
}
,{
  name: "Interstellar",
  img: "http://ecx.images-amazon.com/images/I/91g-WjXKe7L._SL1500_.jpg",
  price: 9.99,
  rating: 4.0,
  category: "entertainment",
  tags: ["movie", "film", "action", "sci-fi"],
  description:
    "Unopanit rutiepa rer yotux iputi to itereti. Arienek taced ecetirap bopep? Iponeyuy urere repoyoc? Padupip cierire nelerac soto arev kame dologol ga. Ri dale pina ebocelier tut vor cixur eyur cicima pobayol? Ga ni yac execorug ran ieterocol one erapo. Piwinen towar rofon. Gosasa viena adarab hic ayiye lufonem ritilin anonele se. Yewi benosa ocu riehe ecumiw atocitof ge ara amaseya liek. Nec etenano etuyi iebie sidatu esawe ze. Mim sat re ocodedo yinunor sie nigip se, ger ekeleli edekin ne ikor furaxir la hohoru atene rar. Imuhec lupi one lidec temerop rotin pi; gecapab iricotis dola. Narodi luli apuru betomir yoseriey sar ired, hisolet tir eloci; nade sanira iforenab apotie rac tul akele! Topuri tagiter tege pe tot tona etu ce suqif, nara nihigig fene.",
  quantity: 0,
  itemID: 8,
  itemReviews: [
    {name: "John", rating: 3.8, review: "Sleek design, intuitive interface, I assume it calls fine, but I don't have any friends, so I don't know about that. Works great as a coaster."},
    {name: "Susan", rating: 1, review: "I chose the iPhone because I was told it would keep my data safe, but for some reason it seems like anyone can just pick up my phone and look at all my stuff. I contacted support and they said I need some... passworm-thingy. Not helpful AT ALL. Last time I buy from a no-name company."},
    {name: "Brandon", rating: 5, review: "I just ordered this new iPhone and I haven't turned it on yet but I saw the beautiful Apple logo on the back and I just HAD to come give them 5 stars right away. Apple is the best, and I love them blindly."}]
}
,{
  name: "V for Vendetta",
  img: "http://ecx.images-amazon.com/images/I/81AaB2hTFML._SL1500_.jpg",
  price: 7.99,
  rating: 4.5,
  category: "entertainment",
  tags: ["movie", "film", "action", "comic"],
  description:
    "Unopanit rutiepa rer yotux iputi to itereti. Arienek taced ecetirap bopep? Iponeyuy urere repoyoc? Padupip cierire nelerac soto arev kame dologol ga. Ri dale pina ebocelier tut vor cixur eyur cicima pobayol? Ga ni yac execorug ran ieterocol one erapo. Piwinen towar rofon. Gosasa viena adarab hic ayiye lufonem ritilin anonele se. Yewi benosa ocu riehe ecumiw atocitof ge ara amaseya liek. Nec etenano etuyi iebie sidatu esawe ze. Mim sat re ocodedo yinunor sie nigip se, ger ekeleli edekin ne ikor furaxir la hohoru atene rar. Imuhec lupi one lidec temerop rotin pi; gecapab iricotis dola. Narodi luli apuru betomir yoseriey sar ired, hisolet tir eloci; nade sanira iforenab apotie rac tul akele! Topuri tagiter tege pe tot tona etu ce suqif, nara nihigig fene.",
  quantity: 0,
  itemID: 9,
  itemReviews: [
    {name: "John", rating: 3.8, review: "Sleek design, intuitive interface, I assume it calls fine, but I don't have any friends, so I don't know about that. Works great as a coaster."},
    {name: "Susan", rating: 1, review: "I chose the iPhone because I was told it would keep my data safe, but for some reason it seems like anyone can just pick up my phone and look at all my stuff. I contacted support and they said I need some... passworm-thingy. Not helpful AT ALL. Last time I buy from a no-name company."},
    {name: "Brandon", rating: 5, review: "I just ordered this new iPhone and I haven't turned it on yet but I saw the beautiful Apple logo on the back and I just HAD to come give them 5 stars right away. Apple is the best, and I love them blindly."}]
}
,{
  name: "Battle Royale",
  img: "http://ecx.images-amazon.com/images/I/31ED3F1GGRL._SX327_BO1,204,203,200_.jpg",
  price: 2.99,
  rating: 4.6,
  category: "lit",
  tags: ["book", "read", "action", "foreign", "takami", "kids"],
  description:
    "Unopanit rutiepa rer yotux iputi to itereti. Arienek taced ecetirap bopep? Iponeyuy urere repoyoc? Padupip cierire nelerac soto arev kame dologol ga. Ri dale pina ebocelier tut vor cixur eyur cicima pobayol? Ga ni yac execorug ran ieterocol one erapo. Piwinen towar rofon. Gosasa viena adarab hic ayiye lufonem ritilin anonele se. Yewi benosa ocu riehe ecumiw atocitof ge ara amaseya liek. Nec etenano etuyi iebie sidatu esawe ze. Mim sat re ocodedo yinunor sie nigip se, ger ekeleli edekin ne ikor furaxir la hohoru atene rar. Imuhec lupi one lidec temerop rotin pi; gecapab iricotis dola. Narodi luli apuru betomir yoseriey sar ired, hisolet tir eloci; nade sanira iforenab apotie rac tul akele! Topuri tagiter tege pe tot tona etu ce suqif, nara nihigig fene.",
  quantity: 0,
  itemID: 10,
  itemReviews: [
    {name: "John", rating: 3.8, review: "Sleek design, intuitive interface, I assume it calls fine, but I don't have any friends, so I don't know about that. Works great as a coaster."},
    {name: "Susan", rating: 1, review: "I chose the iPhone because I was told it would keep my data safe, but for some reason it seems like anyone can just pick up my phone and look at all my stuff. I contacted support and they said I need some... passworm-thingy. Not helpful AT ALL. Last time I buy from a no-name company."},
    {name: "Brandon", rating: 5, review: "I just ordered this new iPhone and I haven't turned it on yet but I saw the beautiful Apple logo on the back and I just HAD to come give them 5 stars right away. Apple is the best, and I love them blindly."}]
}
,{
  name: "The Lord of the Flies",
  img: "http://ecx.images-amazon.com/images/I/61JPcCSRAXL.jpg",
  price: 8.99,
  rating: 4.0,
  category: "lit",
  tags: ["book", "read", "golding", "island", "kids"],
  description:
    "Unopanit rutiepa rer yotux iputi to itereti. Arienek taced ecetirap bopep? Iponeyuy urere repoyoc? Padupip cierire nelerac soto arev kame dologol ga. Ri dale pina ebocelier tut vor cixur eyur cicima pobayol? Ga ni yac execorug ran ieterocol one erapo. Piwinen towar rofon. Gosasa viena adarab hic ayiye lufonem ritilin anonele se. Yewi benosa ocu riehe ecumiw atocitof ge ara amaseya liek. Nec etenano etuyi iebie sidatu esawe ze. Mim sat re ocodedo yinunor sie nigip se, ger ekeleli edekin ne ikor furaxir la hohoru atene rar. Imuhec lupi one lidec temerop rotin pi; gecapab iricotis dola. Narodi luli apuru betomir yoseriey sar ired, hisolet tir eloci; nade sanira iforenab apotie rac tul akele! Topuri tagiter tege pe tot tona etu ce suqif, nara nihigig fene.",
  quantity: 0,
  itemID: 11,
  itemReviews: [
    {name: "John", rating: 3.8, review: "Sleek design, intuitive interface, I assume it calls fine, but I don't have any friends, so I don't know about that. Works great as a coaster."},
    {name: "Susan", rating: 1, review: "I chose the iPhone because I was told it would keep my data safe, but for some reason it seems like anyone can just pick up my phone and look at all my stuff. I contacted support and they said I need some... passworm-thingy. Not helpful AT ALL. Last time I buy from a no-name company."},
    {name: "Brandon", rating: 5, review: "I just ordered this new iPhone and I haven't turned it on yet but I saw the beautiful Apple logo on the back and I just HAD to come give them 5 stars right away. Apple is the best, and I love them blindly."}]

}
,{
  name: "The Hunger Games",
  img: "http://ecx.images-amazon.com/images/I/41bOj-am1RL._SX331_BO1,204,203,200_.jpg",
  price: "6.99",
  rating: 5.6,
  category: "lit",
  tags: ["book", "read", "kids", "dystopian"],
  description:
    "Unopanit rutiepa rer yotux iputi to itereti. Arienek taced ecetirap bopep? Iponeyuy urere repoyoc? Padupip cierire nelerac soto arev kame dologol ga. Ri dale pina ebocelier tut vor cixur eyur cicima pobayol? Ga ni yac execorug ran ieterocol one erapo. Piwinen towar rofon. Gosasa viena adarab hic ayiye lufonem ritilin anonele se. Yewi benosa ocu riehe ecumiw atocitof ge ara amaseya liek. Nec etenano etuyi iebie sidatu esawe ze. Mim sat re ocodedo yinunor sie nigip se, ger ekeleli edekin ne ikor furaxir la hohoru atene rar. Imuhec lupi one lidec temerop rotin pi; gecapab iricotis dola. Narodi luli apuru betomir yoseriey sar ired, hisolet tir eloci; nade sanira iforenab apotie rac tul akele! Topuri tagiter tege pe tot tona etu ce suqif, nara nihigig fene.",
  quantity: 0,
  itemID: 12,
  itemReviews: [
    {name: "John", rating: 3.8, review: "Sleek design, intuitive interface, I assume it calls fine, but I don't have any friends, so I don't know about that. Works great as a coaster."},
    {name: "Susan", rating: 1, review: "I chose the iPhone because I was told it would keep my data safe, but for some reason it seems like anyone can just pick up my phone and look at all my stuff. I contacted support and they said I need some... passworm-thingy. Not helpful AT ALL. Last time I buy from a no-name company."},
    {name: "Brandon", rating: 5, review: "I just ordered this new iPhone and I haven't turned it on yet but I saw the beautiful Apple logo on the back and I just HAD to come give them 5 stars right away. Apple is the best, and I love them blindly."}]
}];

var review = {
  name: "",
  rating: 0,
  text: ""
}

var user = {
  name: 'Hector',
  reviews: [],
  pastOrders: [],
  recommended: []
}
//PRODUCT COLLECTION

var searchResults = [];
var cart = [];

var searchPage = document.getElementById('search-page');
var headerLogo = document.getElementsByClassName('logo')[0];
var categorySelected = document.getElementById('category-select');
var searchInput = document.getElementById('search-textbox');
var searchButton = document.getElementById('search-btn');

var productPage = document.getElementById('product-page');
var buttonLocation = document.getElementById('cart-button');
var cartBtn = buttonLocation.children[0];

var cartPage = document.getElementById('cart-page');
var cartButton = document.getElementById('cart-btn');
var cartItemCount = document.getElementById('');
var cartSubTotal = document.getElementById('');
var cartTax = document.getElementById('');
var cartTotal = document.getElementById('');

var checkoutPage = document.getElementById('checkout-page');
var checkoutButton = document.getElementById('check-out');
var checkoutItemCount = document.getElementById('checkout-count');
var checkoutSubTotal = document.getElementById('checkout-subtotal');
var checkoutTax = document.getElementById('checkout-tax');
var checkoutTotal = document.getElementById('checkout-total');
var checkoutName = document.getElementById('payment-name');
var checkoutAddress = document.getElementById('payment-address');
var checkoutCity = document.getElementById('payment-city');
var checkoutState = document.getElementById('state-select');
var checkoutZip = document.getElementById('payment-zip');
var payButton = document.getElementById('checkout-submit');
var paymentCard = document.getElementById('payment-card-number');
var paymentExpMonth = document.getElementById('exp-month');
var paymentExpYear = document.getElementById('exp-year');
var paymentCVV = document.getElementById('payment-card-cvv');

var receiptPage = document.getElementById('receipt-page');

//EVENTLISTENERS
headerLogo.addEventListener('click', showSearch);

searchButton.addEventListener('click', search);

cartButton.addEventListener('click', cartGenerate);

checkoutButton.addEventListener('click', showCheckout);

payButton.addEventListener('click', validatePayment);

cartBtn.addEventListener('click', function(event) {
  addItemToCart(event.target.id);
});

//FUNCTIONS
function search(event) {
  event.preventDefault();

  showSearch();
  searchResults = [];

  if(searchInput.value == '' || searchInput.value == 'Search') {
    if(categorySelected.value != 'all') {
      for(var i = 0; i < productList.length; i++) {
        if(productList[i].category == categorySelected.value) {
          searchResults.push(productList[i]);
        }
      }
    }
    else {
      for(var i = 0; i < productList.length; i++) {
        searchResults.push(productList[i]);
      }
    }
  }
  else {
    for(var i = 0; i < productList.length; i++) {
      if(productList[i].name.toLowerCase() == searchInput.value.toLowerCase()) {
        searchResults.push(productList[i]);
      }
    }
  }

  clearResults();
  generateSearchResults(searchResults);
}

function clearResults() {
  var resultLocation = document.getElementById('search-results');
  while(resultLocation.firstChild) {
    resultLocation.removeChild(resultLocation.firstChild);
  }
}

function generateSearchResults(items) {
  for (var i = 0; i < items.length; i++) {
    var resultLocation = document.getElementById('search-results');

    var paddingLeft = document.createElement('div');
    paddingLeft.className = 'col-md-9 col-md-offset-1';
    resultLocation.appendChild(paddingLeft);
    paddingLeft.id = 'search-result-' + items[i].itemID;

    var newResult = document.createElement('div');
    newResult.className = "media";

    var mediaLeft = document.createElement('div');
    mediaLeft.className = "media-left media-middle";

    var mediaObject = document.createElement('img');
    mediaObject.className = "media-object";
    mediaObject.src = items[i].img;
    mediaObject.setAttribute("width", "300px");

    var mediaBody = document.createElement('div');
    mediaBody.className = "media-body media-middle";

    var mediaHeading = document.createElement('h3');
    mediaHeading.className = "media-heading";
    mediaHeading.textContent = items[i].name;

    var mediaPrice = document.createElement('p');
    mediaPrice.textContent = "Price: $" + items[i].price;

    var mediaRating = document.createElement('p');
    mediaRating.textContent = "Rating: " + items[i].rating;

    var mediaDescription = document.createElement('p');
    mediaDescription.textContent = "Description: " + items[i].description;

    var buttonForm = document.createElement('form');
    buttonForm.action = "#";

    var cartButton = document.createElement('button');
    cartButton.textContent = "Add to Cart";
    cartButton.id = items[i].itemID;
    cartButton.className = "btn btn-secondary btn-lg bg-info col-md-3 col-sm-3";
    cartButton.setAttribute('type', 'button');
    buttonForm.appendChild(cartButton);

    var viewButton = document.createElement('button');
    viewButton.textContent = "View Item";
    viewButton.id = items[i].itemID;
    viewButton.className = "btn btn-secondary btn-lg bg-info col-md-3 col-md-offset-1 col-sm-3 col-sm-offset-1";
    viewButton.setAttribute('type', 'button');
    buttonForm.appendChild(viewButton);

    var horizontal = document.createElement('hr');

    cartButton.addEventListener('click', function(event) {
      addItemToCart(event.target.id);
    });

    viewButton.addEventListener('click', function(event) {
      generateProduct(event.target.id);
    });

    newResult.appendChild(mediaLeft);
    mediaLeft.appendChild(mediaObject);
    newResult.appendChild(mediaBody);
    mediaBody.appendChild(mediaHeading);
    mediaBody.appendChild(mediaPrice);
    mediaBody.appendChild(mediaRating);
    mediaBody.appendChild(mediaDescription);
    mediaBody.appendChild(buttonForm);
    paddingLeft.appendChild(newResult);
    paddingLeft.appendChild(horizontal);
  }

}

function addItemToCart(id) {
  console.log(id);

  for (var i = 0; i < productList.length; i++) {
    if(id == productList[i].itemID) {
      cart.push(productList[i]);
      cart[cart.length-1].quantity = 1;
    }
  }
  setCartCount();
}

function generateProduct(id) {
  clearReviews();
  showProduct();
  var product;

  for (var i = 0; i < productList.length; i++) {
    if(id == productList[i].itemID) {
      product = productList[i];
    }
  }

  var title = document.querySelector('div.panel-heading > h2');
  title.textContent = product.name;
  title.style.fontSize = "2em";

  var image = document.getElementById('product-img');
  image.src = product.img;
  image.style.width = '400px';

  var info = document.getElementById('product-info');
  info.textContent = product.description;
  info.style.fontSize = "1.2em";

  var price = document.getElementById('product-price');
  price.textContent = product.price;

  var rating = document.getElementById('product-rating');
  rating.textContent = product.rating;

  var reviewCount = document.getElementById('product-reviews');
  reviewCount.textContent = "  " + product.itemReviews.length;

  cartBtn.id = product.itemID;

  generateReviews(product.itemID);
}

function clearReviews() {
  var reviewsLocation = document.getElementById('reviews');
  while(reviewsLocation.firstChild) {
    reviewsLocation.removeChild(reviewsLocation.firstChild);
  }
}

function generateReviews(id) {

  var reviews = productList[id].itemReviews;
  var location = document.getElementById('reviews');

  for(var i = 0; i < reviews.length; i++) {

    var newReview  = newElement('div', location);
    var reviewHeading = newElement('div', newReview);
    var reviewTitle = newElement('h3', reviewHeading);
    var reviewFooter = newElement('h5', newReview);
    var reviewBody = newElement('div', newReview);


    if (reviews[i].rating <= 2) {
      newReview.className = 'panel panel-danger';
    }
    else if (reviews[i].rating >= 4) {
      newReview.className = 'panel panel-success';
    }
    else {
      newReview.className = 'panel panel-warning';
    }

    reviewHeading.className = 'panel-heading';
    reviewTitle.className = 'panel-title';
    reviewBody.className = 'panel-body';
    reviewFooter.className = 'panel-footer h5';

    reviewTitle.textContent = reviews[i].name;
    reviewBody.textContent = reviews[i].review;
    reviewFooter.textContent = "Rating: " + reviews[i].rating + "/5";

  }
}

function writeReview(id) {
  var reviewObject = {
    item: id,
    rating: 0,
    comments: ""
  }

}

function cartGenerate() {
  var cartLocation = document.getElementById('cart');

  while(cartLocation.firstChild) {
      cartLocation.removeChild(cartLocation.firstChild);
  }

  cartDuplicates();

  for(var i = 0; i < cart.length; i++) {
    var panel = document.createElement('div');
    panel.className = 'panel panel-default';

    var panelBody = document.createElement('div');
    panelBody.className = 'panel-body';

    panel.appendChild(panelBody);
    var space = document.createElement('br');
    var horizontal = document.createElement('hr');

    var newRow = document.createElement('div');
    newRow.className = 'row';
    var colLeft = document.createElement('div');
    colLeft.className = 'col-md-4 col-md-offset-1';
    var colRight = document.createElement('div');
    colRight.className = 'col-md-2 col-md-offset-3 text-center';

    panelBody.appendChild(newRow);
    newRow.appendChild(colLeft);
    newRow.appendChild(colRight);
    var media = document.createElement('div');
    media.className = 'media';

    var mediaLeft = document.createElement('div');
    mediaLeft.className = 'media-left media-middle';

    var mediaObject = document.createElement('img');
    mediaObject.className = 'media-object';
    mediaObject.src = cart[i].img;
    mediaObject.setAttribute("width", "150px");

    var mediaBody = document.createElement('div');
    mediaBody.className = 'media-body';

    var mediaHeading = document.createElement('h3');
    mediaHeading.className = 'media-heading';
    mediaHeading.textContent = cart[i].name;

    var labelPrice = document.createElement('label');
    labelPrice.setAttribute = ("for","price");
    labelPrice.textContent = "Price";

    var unitPrice = document.createElement('p');
    unitPrice.name = "price";
    unitPrice.textContent = '$' + cart[i].price;

    var labelRating = document.createElement('label');
    labelRating.setAttribute = ("for","rating");
    labelRating.textContent = "Customer Rating";
    var mediaRating = document.createElement('p');
    mediaRating.name = "rating";
    mediaRating.textContent = cart[i].rating;

    var formHorizontal = document.createElement('form');
    formHorizontal.className = 'form-horizontal';

    var formGroup = document.createElement('form');
    formGroup.className = 'form-group';
    formHorizontal.appendChild(formGroup);

    var quantityLocation = document.createElement('div');
    quantityLocation.className = 'col-md-7';
    formGroup.appendChild(quantityLocation);

    var mediaQuantity = document.createElement('select');
    mediaQuantity.className = 'form-control form-group';
    mediaQuantity.id = cart[i].itemID;

    for(var j = 1; j < 31; j++) {
      var option = document.createElement('option');
      option.textContent = j;
      mediaQuantity.appendChild(option);
    }

    quantityLocation.appendChild(mediaQuantity);

    mediaQuantity.value = cart[i].quantity;
    mediaQuantity.addEventListener('change', function(event) {
      changeQuantity(event.target.id, Number(event.target.value));
    });

    var buttonRemove = document.createElement('btn');
    buttonRemove.setAttribute = ("type", "button");
    buttonRemove.textContent = "Remove from Cart";
    buttonRemove.className = "btn btn-default";
    buttonRemove.id = cart[i].itemID;
    buttonRemove.addEventListener('click', function(event) {
      changeQuantity(event.target.id, 0);
    });


    mediaBody.appendChild(mediaHeading);
    mediaBody.appendChild(labelPrice);
    mediaBody.appendChild(unitPrice);
    mediaBody.appendChild(labelRating);
    mediaBody.appendChild(mediaRating);
    mediaBody.appendChild(formGroup);
    mediaBody.appendChild(buttonRemove);
    mediaLeft.appendChild(mediaObject);
    media.appendChild(mediaLeft);
    media.appendChild(mediaBody);
    colLeft.appendChild(media);
    cartLocation.appendChild(panel);



    var labelSubtotal = document.createElement('label');
    labelSubtotal.setAttribute = ("for","subtotal");
    labelSubtotal.textContent = "Subtotal";

    var unitSubtotal = document.createElement('p');
    unitPrice.subtotal = "subtotal";
    unitSubtotal.textContent = '$' + (cart[i].price * cart[i].quantity).toFixed(2);

    var labelTax = document.createElement('label');
    labelTax.setAttribute = ("for","tax");
    labelTax.textContent = "Sales Tax";

    var unitTax = document.createElement('p');
    unitTax.name = "tax";
    unitTax.textContent = '$' + (cart[i].price * cart[i].quantity * 0.08).toFixed(2);

    var labelTotal = document.createElement('label');
    labelTotal.setAttribute = ("for","total");
    labelTotal.textContent = "Total";

    var unitTotal = document.createElement('p');
    unitTotal.name = "total";
    unitTotal.textContent = '$' + (cart[i].price * cart[i].quantity * 1.08).toFixed(2);

    colRight.appendChild(space);
    colRight.appendChild(labelSubtotal);
    colRight.appendChild(unitSubtotal);
    colRight.appendChild(labelTax);
    colRight.appendChild(unitTax);
    colRight.appendChild(horizontal);
    colRight.appendChild(labelTotal);
    colRight.appendChild(unitTotal);

  }

  showCart();
}

function setCartCount() {
  var cartIcon = document.getElementById('cart-btn');

  var count = cartCount();

  cartIcon.firstChild.textContent = count;
}

function cartCount() {
  var count = 0;
  for(var i = 0; i < cart.length; i++) {
    count += cart[i].quantity;
  }
  return count;
}

function clearCart() {
  user.pastOrders.push(cart);
  var cartIcon = document.getElementById('cart-btn');
  cartIcon.firstChild.textContent = '0';
  cart = [];
}

function cartDuplicates() {

  for( var i = 0; i < cart.length; i++ ) {
    for( var j = i+1; j < cart.length; j++ ) {
      if( cart[i].itemID == cart[j].itemID ) {
        cart[i].quantity++;
        cart.splice(j,1);
        j--;
      }
    }
  }
}

function cartSum() {
  var cartSubTotal = 0;
  for (var i = 0; i < cart.length; i++) {
    cartSubTotal += (cart[i].price * cart[i].quantity);
  }
  return cartSubTotal;
}

function changeQuantity(id, num) {
  for(var i = 0; i < cart.length; i++) {
    if(cart[i].itemID == id) {
      cart[i].quantity = num;
    }
  }
  for(var i = 0; i < cart.length; i++) {
    if(cart[i].quantity == 0) {
      cart.splice(i,1);
      i--;
    }
  }
  setCartCount();
  cartGenerate();
}

function generateAddress() {
  var addressLocation1 = document.getElementById('receipt-address1');
  var addressLocation2 = document.getElementById('receipt-address2');

  addressLocation1.textContent = checkoutAddress.value;
  addressLocation2.textContent = checkoutCity.value + ', ' + checkoutState.value + ' ' + checkoutZip.value;
}

function loadCheckout() {
  checkoutItemCount.textContent = cartCount();
  checkoutSubTotal.textContent = '$' + (cartSum()).toFixed(2);
  checkoutTax.textContent = '$' + (cartSum() * 0.08).toFixed(2);
  checkoutTotal.textContent = '$' + (cartSum() * 1.08).toFixed(2);
}

function validatePayment() {
  event.preventDefault();
  var well = document.getElementById('payment-alert');

  if(checkoutTotal.textContent == '$0.00') {
    well.className = 'well alert alert-warning text-center';
    well.textContent = "Your cart is empty.";
    return;
  }
  if((paymentCard.value.length != 16) ||
    (paymentExpMonth.value.length != 2) ||
    (paymentExpYear.value.length != 4) ||
    (paymentCVV.value.length != 3)) {
      well.className = 'well alert alert-danger text-center';
      well.textContent = "Please make sure you enter all payment information!";
      return;
  }

  showReceipt();
}

function loadReceipt() {
  var receiptName = document.getElementById('receipt-name');
  var receiptItemCount = document.getElementById('receipt-item-count');
  var receiptTotal = document.getElementById('receipt-total');
  receiptName.textContent = checkoutName.value;
  generateAddress();
  receiptItemCount.textContent = cartCount();
  receiptTotal.textContent = checkoutTotal.textContent;
  clearCart();
}

function showCheckout() {
  var classes = checkoutPage.className.split(' ');
  if(classes.indexOf('hide') > -1) {
    var location = classes.indexOf('hide');
    classes.splice(location, 1);
    checkoutPage.className = classes.join(' ');
  }
  hideSearch();
  hideReceipt();
  hideCart();

  loadCheckout();
}

function hideCheckout() {
  var classes = checkoutPage.className.split(' ');
  if(classes.indexOf('hide') === -1) {
    classes.push('hide');
    checkoutPage.className = classes.join(' ');
  }
}

function showProduct() {
  var classes = productPage.className.split(' ');
  if(classes.indexOf('hide') > -1) {
    var location = classes.indexOf('hide');
    classes.splice(location, 1);
    productPage.className = classes.join(' ');
  }

  hideCart();
  hideCheckout();
  hideReceipt();
  hideSearch();
}

function hideProduct() {
  var classes = productPage.className.split(' ');
  if(classes.indexOf('hide') === -1) {
    classes.push('hide');
    productPage.className = classes.join(' ');
  }
}

function showCart() {
  var classes = cartPage.className.split(' ');
  if(classes.indexOf('hide') > -1) {
    var location = classes.indexOf('hide');
    classes.splice(location, 1);
    cartPage.className = classes.join(' ');
  }

  hideProduct();
  hideCheckout();
  hideReceipt();
  hideSearch();
}

function hideCart() {
  var classes = cartPage.className.split(' ');
  if(classes.indexOf('hide') === -1) {
    classes.push('hide');
    cartPage.className = classes.join(' ');
  }
}

function showSearch() {
  var classes = searchPage.className.split(' ');
  if(classes.indexOf('hide') > -1) {
    var location = classes.indexOf('hide');
    classes.splice(location, 1);
    searchPage.className = classes.join(' ');
  }

  hideProduct();
  hideCheckout();
  hideReceipt();
  hideCart();
}

function hideSearch() {
  var classes = searchPage.className.split(' ');
  if(classes.indexOf('hide') === -1) {
    classes.push('hide');
    searchPage.className = classes.join(' ');
  }
}

function showReceipt() {
  event.preventDefault();

  var classes = receiptPage.className.split(' ');
  if(classes.indexOf('hide') > -1) {
    var location = classes.indexOf('hide');
    classes.splice(location, 1);
    receiptPage.className = classes.join(' ');
  }

  hideProduct();
  hideSearch();
  hideCheckout();
  hideCart();

  loadReceipt();
}

function hideReceipt() {
  var classes = receiptPage.className.split(' ');
  if(classes.indexOf('hide') === -1) {
    classes.push('hide');
    receiptPage.className = classes.join(' ');
  }
}

function newElement(type, parent) {
  var temp = document.createElement(type);
  if (parent != '') {
    parent.appendChild(temp);
  }
  return temp;
}

window.onload = search;
